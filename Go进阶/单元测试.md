### 单元测试的运行原理：

![image-20250921152437859](C:\Users\16053\AppData\Roaming\Typora\typora-user-images\image-20250921152437859.png)

### 单元测试代码：

**被测试的代码：**

```go
package main

func add(num int) int {
    sum := 0
    for i := 1; i <= num; i++ {
       sum += i
    }
    return sum
}

func getSub(n1 int, n2 int) int {
    return n1 - n2

}
```

**测试代码：**

```go
func TestAddUpper(t *testing.T) {
    res := add(10)
    if res != 55 {
       //错误语句
       t.Fatalf("Add(10)执行错误，期望值=%v 实际值=%v\n", 55, res)
    }
    //成功语句
    t.Logf("Add(10)执行正确")
}

func TestHello(t *testing.T) {
    fmt.Println("Hello被调用")
}

func TestSub(t *testing.T) {
	res := getSub(10, 4)
	if res != 6 {
		t.Fatalf("getSub(10,4)执行错误，期望值=%v，实际值=%v", 6, res)
	}
	t.Logf("getSub(10,4)执行成功")
}
```

### 单元测试细节：

1. 测试用例文件名必须以_test.go结尾。比如cal_test.go，cal不是固定的。

2. 测试用例函数必须用Test开头，一般来说就是Test+被测试的函数名，比如TestAddUpper，Test后面的第一个字母A要大写。

3. TestAddUpper(t * testing.T)的形参类型必须是*testing.T。

4. 一个测试用例文件中可以有多个测试用例函数，比如TestAddUpper、TestSub。

5. 运行测试用例指令cmd>go test  cmd>go test -v

   -v输出全部，不加-v只输出错误的日志。

6. 当出现错误时，可以使用t.Fatalf来格式化输出错误信息，并退出程序。

7. t.Logf方法可以输出对应的日志。

8. 测试用例函数不需要放在main函数中。

9. PASS表示测试用例运行成功，FAIL表示测试用例运行失败。

10. 

    